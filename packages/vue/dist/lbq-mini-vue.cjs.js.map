{"version":3,"file":"lbq-mini-vue.cjs.js","sources":["../../../../src/utils/index.ts","../../../../src/runtime/vnode.ts","../../../../src/runtime/render.ts","../../../../src/runtime/tests/index.ts"],"sourcesContent":["export const isObject = (target) => {\r\n  return typeof target === \"object\" && target !== null;\r\n};\r\nexport const hasChanged = (oldValue, value) => {\r\n  return value !== oldValue && !(Number.isNaN(oldValue) && Number.isNaN(value));\r\n};\r\nexport const isFunction = (value)=>{\r\n    return typeof value ===\"function\"\r\n}\r\nexport const isArray = (value)=>{\r\n   return  Array.isArray(value)\r\n}\r\nexport const isString = (value)=>{\r\n  return typeof value === 'string'\r\n}\r\n\r\nexport const isNumber = (value)=>{\r\n  return typeof value === 'number'\r\n}\r\nexport const isBoolean = (value)=>{\r\n  return typeof value === 'boolean'\r\n}\r\n","/*\r\n * @Author: Liboq 99778162+Liboq@users.noreply.github.com\r\n * @Date: 2023-03-20 09:57:02\r\n * @LastEditors: Liboq 99778162+Liboq@users.noreply.github.com\r\n * @LastEditTime: 2023-03-21 12:20:49\r\n */\r\nimport { isString, isNumber, isArray } from \"../utils/index\";\r\nexport const ShapeFlags = {\r\n  ELEMENT: 1,\r\n  TEXT: 1 << 1,\r\n  FRAGMENT: 1 << 2,\r\n  COMPONENT: 1 << 3,\r\n  TEXT_CHILDREN: 1 << 4,\r\n  ARRAY_CHILDREN: 1 << 5,\r\n  CHILDREN: (1 << 4) | (1 << 5),\r\n};\r\nexport const Text = Symbol(\"Text\");\r\nexport const Fragment = Symbol(\"Fragment\");\r\n\r\n/**\r\n * @description:\r\n * @param {String | Object | Text | Fragement } type\r\n * @param {Object | null} props\r\n * @param {String | Array | Object | null} children\r\n * @return vnode\r\n */\r\nexport const h = (type, props, children) => {\r\n  let shapeFlag = 0;\r\n  if (isString(type)) {\r\n    shapeFlag = ShapeFlags.ELEMENT;\r\n  } else if (type === Text) {\r\n    shapeFlag = ShapeFlags.TEXT;\r\n  } else if (type === Fragment) {\r\n    shapeFlag = ShapeFlags.FRAGMENT;\r\n  } else {\r\n    shapeFlag = ShapeFlags.COMPONENT;\r\n  }\r\n  if (isString(children) || isNumber(children)) {\r\n    shapeFlag |= ShapeFlags.TEXT_CHILDREN;\r\n    children = children.toString();\r\n  } else if (isArray(children)) {\r\n    shapeFlag |= ShapeFlags.ARRAY_CHILDREN;\r\n  }\r\n  return {\r\n    type,\r\n    props,\r\n    children,\r\n    shapeFlag,\r\n  };\r\n};\r\n","/*\r\n * @Author: Liboq 99778162+Liboq@users.noreply.github.com\r\n * @Date: 2023-03-20 11:19:18\r\n * @LastEditors: Liboq 99778162+Liboq@users.noreply.github.com\r\n * @LastEditTime: 2023-03-21 12:23:12\r\n * @FilePath: \\pikachu-mini-vue\\src\\runtime\\render.ts\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n */\r\nimport { ShapeFlags } from \"./vnode\";\r\nimport { isBoolean } from \"../utils/index\";\r\nexport const render = (vnode, container) => {\r\n  mount(vnode, container);\r\n};\r\nexport const mount = (vnode, container) => {\r\n  const { shapeFlag } = vnode;\r\n  if (shapeFlag & ShapeFlags.ELEMENT) {\r\n    mountElement(vnode, container);\r\n  } else if (shapeFlag & ShapeFlags.TEXT) {\r\n    mountTextNode(vnode, container);\r\n  } else if (shapeFlag & ShapeFlags.FRAGMENT) {\r\n    mountFragment(vnode, container);\r\n  } else {\r\n    mountComponent(vnode, container);\r\n  }\r\n};\r\nexport const mountElement = (vnode, container) => {\r\n  const { props, type } = vnode;\r\n  const el = document.createElement(type);\r\n  mountProps(props, el);\r\n  mountChildren(vnode, el);\r\n  container.appendChild(el);\r\n};\r\n\r\nexport const mountTextNode = (vnode, container) => {\r\n  const textNode = document.createTextNode(vnode.children);\r\n  container.appendChild(textNode);\r\n};\r\n\r\nexport const mountComponent = (vnode, container) => {};\r\n\r\nexport const mountFragment = (vnode, container) => {\r\n  mountChildren(vnode, container);\r\n};\r\n\r\nexport const mountChildren = (vnode, container) => {\r\n  const { shapeFlag, children } = vnode;\r\n  if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n    mountTextNode(vnode, container);\r\n  } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n    children.forEach((child) => {\r\n      mount(child, container);\r\n    });\r\n  }\r\n};\r\n/* \r\n{\r\n  class: 'a b',\r\n  style: {\r\n    color: 'red',\r\n    fontSize: '14px',\r\n  },\r\n  onClick: () => console.log('click'),\r\n  checked: '',\r\n  custom: false\r\n}\r\n+. */\r\nconst domPropsRE = /[A-Z]|^(value|checked|selected|muted|disabled)$/;\r\n\r\nexport const mountProps = (props, el) => {\r\n  for (const key in props) {\r\n    let value = props[key];\r\n    switch (key) {\r\n      case \"class\":\r\n        el.className = value;\r\n        break;\r\n      case \"style\":\r\n        for (const styleName in value) {\r\n          el.style[styleName] = value[styleName];\r\n        }\r\n        break;\r\n      default:\r\n        if (/^on[^a-z]/.test(key)) {\r\n          const eventName = key.slice(2).toLowerCase();\r\n          el.addEventListener(eventName, value);\r\n        } else if (domPropsRE.test(key)) {\r\n          if (value === \"\" && isBoolean(el[key])) {\r\n            value = true;\r\n          }\r\n          el[key] = value;\r\n        } else {\r\n          if (value == null || value === false) {\r\n            el.removeAttribute(key);\r\n          } else {\r\n            el.setAttribute(key, value);\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  }\r\n};\r\n","import { h, render } from \"../../runtime/index\";\r\n\r\nconst vnode = h('div',{\r\n    class:'a b',\r\n    style:{\r\n        border:'1px solid',\r\n        fontSize: '14px'\r\n    },\r\n    onClick:()=>console.log('click'),\r\n    id:'foo',\r\n    checked:'',\r\n    custom:false\r\n},[\r\n    h('ul',null,[\r\n        h('li',{style:{color:'red'}},1),\r\n        h('li',null,2),\r\n        h('li',{style:{color:'blue'}},3),\r\n        h('Fragment',null,[\r\n        h('li',null,null),\r\n        ]),\r\n        h('li',{style:{color:'red'}},1),\r\n    ])\r\n])\r\nrender(vnode,document.body)"],"names":[],"mappings":";;AASO,MAAM,OAAO,GAAG,CAAC,KAAK,KAAG;AAC7B,IAAA,OAAQ,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAA;AAC/B,CAAC,CAAA;AACM,MAAM,QAAQ,GAAG,CAAC,KAAK,KAAG;AAC/B,IAAA,OAAO,OAAO,KAAK,KAAK,QAAQ,CAAA;AAClC,CAAC,CAAA;AAEM,MAAM,QAAQ,GAAG,CAAC,KAAK,KAAG;AAC/B,IAAA,OAAO,OAAO,KAAK,KAAK,QAAQ,CAAA;AAClC,CAAC,CAAA;AACM,MAAM,SAAS,GAAG,CAAC,KAAK,KAAG;AAChC,IAAA,OAAO,OAAO,KAAK,KAAK,SAAS,CAAA;AACnC,CAAC;;ACrBD;;;;;AAKG;AAEI,MAAM,UAAU,GAAG;AACxB,IAAA,OAAO,EAAE,CAAC;IACV,IAAI,EAAE,CAAC,IAAI,CAAC;IACZ,QAAQ,EAAE,CAAC,IAAI,CAAC;IAChB,SAAS,EAAE,CAAC,IAAI,CAAC;IACjB,aAAa,EAAE,CAAC,IAAI,CAAC;IACrB,cAAc,EAAE,CAAC,IAAI,CAAC;IACtB,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;CAC9B,CAAC;AACK,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AAC5B,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAE3C;;;;;;AAMG;AACI,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,KAAI;IACzC,IAAI,SAAS,GAAG,CAAC,CAAC;AAClB,IAAA,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;AAClB,QAAA,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC;AAChC,KAAA;SAAM,IAAI,IAAI,KAAK,IAAI,EAAE;AACxB,QAAA,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC;AAC7B,KAAA;SAAM,IAAI,IAAI,KAAK,QAAQ,EAAE;AAC5B,QAAA,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC;AACjC,KAAA;AAAM,SAAA;AACL,QAAA,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC;AAClC,KAAA;IACD,IAAI,QAAQ,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,EAAE;AAC5C,QAAA,SAAS,IAAI,UAAU,CAAC,aAAa,CAAC;AACtC,QAAA,QAAQ,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC;AAChC,KAAA;AAAM,SAAA,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC5B,QAAA,SAAS,IAAI,UAAU,CAAC,cAAc,CAAC;AACxC,KAAA;IACD,OAAO;QACL,IAAI;QACJ,KAAK;QACL,QAAQ;QACR,SAAS;KACV,CAAC;AACJ,CAAC;;ACjDD;;;;;;;AAOG;AAGI,MAAM,MAAM,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;AACzC,IAAA,KAAK,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAC1B,CAAC,CAAC;AACK,MAAM,KAAK,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;AACxC,IAAA,MAAM,EAAE,SAAS,EAAE,GAAG,KAAK,CAAC;AAC5B,IAAA,IAAI,SAAS,GAAG,UAAU,CAAC,OAAO,EAAE;AAClC,QAAA,YAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAChC,KAAA;AAAM,SAAA,IAAI,SAAS,GAAG,UAAU,CAAC,IAAI,EAAE;AACtC,QAAA,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AACjC,KAAA;AAAM,SAAA,IAAI,SAAS,GAAG,UAAU,CAAC,QAAQ,EAAE;AAC1C,QAAA,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AACjC,KAAA;AAAM,SAAA,CAEN;AACH,CAAC,CAAC;AACK,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;AAC/C,IAAA,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC;IAC9B,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AACxC,IAAA,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AACtB,IAAA,aAAa,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AACzB,IAAA,SAAS,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;AAC5B,CAAC,CAAC;AAEK,MAAM,aAAa,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;IAChD,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AACzD,IAAA,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AAClC,CAAC,CAAC;AAIK,MAAM,aAAa,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;AAChD,IAAA,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAClC,CAAC,CAAC;AAEK,MAAM,aAAa,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;AAChD,IAAA,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC;AACtC,IAAA,IAAI,SAAS,GAAG,UAAU,CAAC,aAAa,EAAE;AACxC,QAAA,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AACjC,KAAA;AAAM,SAAA,IAAI,SAAS,GAAG,UAAU,CAAC,cAAc,EAAE;AAChD,QAAA,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAK,KAAI;AACzB,YAAA,KAAK,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAC1B,SAAC,CAAC,CAAC;AACJ,KAAA;AACH,CAAC,CAAC;AACF;;;;;;;;;;;AAWK;AACL,MAAM,UAAU,GAAG,iDAAiD,CAAC;AAE9D,MAAM,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,KAAI;AACtC,IAAA,KAAK,MAAM,GAAG,IAAI,KAAK,EAAE;AACvB,QAAA,IAAI,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;AACvB,QAAA,QAAQ,GAAG;AACT,YAAA,KAAK,OAAO;AACV,gBAAA,EAAE,CAAC,SAAS,GAAG,KAAK,CAAC;gBACrB,MAAM;AACR,YAAA,KAAK,OAAO;AACV,gBAAA,KAAK,MAAM,SAAS,IAAI,KAAK,EAAE;oBAC7B,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;AACxC,iBAAA;gBACD,MAAM;AACR,YAAA;AACE,gBAAA,IAAI,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBACzB,MAAM,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;AAC7C,oBAAA,EAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;AACvC,iBAAA;AAAM,qBAAA,IAAI,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBAC/B,IAAI,KAAK,KAAK,EAAE,IAAI,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE;wBACtC,KAAK,GAAG,IAAI,CAAC;AACd,qBAAA;AACD,oBAAA,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;AACjB,iBAAA;AAAM,qBAAA;AACL,oBAAA,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,EAAE;AACpC,wBAAA,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;AACzB,qBAAA;AAAM,yBAAA;AACL,wBAAA,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;AAC7B,qBAAA;AACF,iBAAA;gBACD,MAAM;AACT,SAAA;AACF,KAAA;AACH,CAAC;;ACjGD,MAAM,KAAK,GAAG,CAAC,CAAC,KAAK,EAAC;AAClB,IAAA,KAAK,EAAC,KAAK;AACX,IAAA,KAAK,EAAC;AACF,QAAA,MAAM,EAAC,WAAW;AAClB,QAAA,QAAQ,EAAE,MAAM;AACnB,KAAA;IACD,OAAO,EAAC,MAAI,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;AAChC,IAAA,EAAE,EAAC,KAAK;AACR,IAAA,OAAO,EAAC,EAAE;AACV,IAAA,MAAM,EAAC,KAAK;CACf,EAAC;AACE,IAAA,CAAC,CAAC,IAAI,EAAC,IAAI,EAAC;AACR,QAAA,CAAC,CAAC,IAAI,EAAC,EAAC,KAAK,EAAC,EAAC,KAAK,EAAC,KAAK,EAAC,EAAC,EAAC,CAAC,CAAC;AAC/B,QAAA,CAAC,CAAC,IAAI,EAAC,IAAI,EAAC,CAAC,CAAC;AACd,QAAA,CAAC,CAAC,IAAI,EAAC,EAAC,KAAK,EAAC,EAAC,KAAK,EAAC,MAAM,EAAC,EAAC,EAAC,CAAC,CAAC;AAChC,QAAA,CAAC,CAAC,UAAU,EAAC,IAAI,EAAC;AAClB,YAAA,CAAC,CAAC,IAAI,EAAC,IAAI,EAAC,IAAI,CAAC;SAChB,CAAC;AACF,QAAA,CAAC,CAAC,IAAI,EAAC,EAAC,KAAK,EAAC,EAAC,KAAK,EAAC,KAAK,EAAC,EAAC,EAAC,CAAC,CAAC;KAClC,CAAC;AACL,CAAA,CAAC,CAAA;AACF,MAAM,CAAC,KAAK,EAAC,QAAQ,CAAC,IAAI,CAAC;;"}